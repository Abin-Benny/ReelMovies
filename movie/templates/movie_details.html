{% extends 'base.html' %}
{% load crispy_forms_filters %}

{% block title %}
Movie Details
{% endblock %}

{% block accounts %}
    {% if user.is_authenticated %}
         <span class="text-muted">Welcome!&nbsp{{user.first_name}}</span>
        <div>
            <a href="{% url 'index' %}">Home</a> |
            <a href="{% url 'logout' %}">Logout</a>
        </div>
    {% else %}
        <span class="text-muted">Welcome!</span>
        <div>
            <a href="{% url 'login' %}">Sign in</a> |
            <a href="{% url 'register' %}"> Register</a>
        </div>
    {% endif %}
{% endblock %}

{% block content %}

<section class="bg-secondary">
	<center>
		<div class="card bg-dark m-5" style="max-width:75%">
			<div class="row no-gutters">
				<div class="col-sm-4" style="background: #868e96;">
					<img src="{{MEDIA_URL}}{{movies.image.url}}" class="card-img-top h-100" alt="...">
				</div>
				<div class="col-sm-8">
					<div class="card-body text-white">
						<div class="row">
							<div class="item-option-select ml-5">
								<h2 class="card-title">{{movies.movie_name}}</h2>
								<button type="button" class="btn btn-secondary">{{movies.Genre}}</button>
							</div>
						</div>
						<p class="card-text mt-3">{{movies.description}}</p>
						<hr>
						<div class="row">
							<div class="item-option-select">
								<h6 class="text-primary ml-3"><bold class="text-white">Director</bold>&nbsp&nbsp{{movies.director}}</h6>
							</div>
						</div>
							<hr>
						<div class="row">
							<div class="item-option-select">
								<h6 class="text-primary ml-3"><bold class="text-white">Writers</bold>&nbsp&nbsp{{movies.writer}}</h6>
							</div>
						</div>
						<hr>
						<div class="row">
							<div class="item-option-select">
								<h6 class="text-primary ml-3"><bold class="text-white">Cast</bold>&nbsp&nbsp{{movies.cast}}</h6>
							</div>
						</div>
					</div>
				</div>
			</div>
    	</div>
	</center>
	<br>
	<div class="row">
		<div class="col-md-9 ml-5">
			<header class="section-heading">
				<h3 class="m-5 text-white">Write Your Review </h3>
			</header>
			<form method="POST" action="{% url 'user_reviews' %}">
				{% csrf_token %}
				 <div class="form-group">
					 <label for="title">Title</label>
					 <input type="text" class="form-control" name="title" id="title" placeholder="Enter Title">
				 </div>
				<div class="form-group">
					 <label for="review">Review</label>
					 <input type="text" class="form-control" name="review" id="review" placeholder="Review">
				 </div>
				<div class="form-group">
					 <label for="rating">Rating</label>
					 <input type="text" class="form-control" name="rating" id="rating" placeholder="Rating">
				 </div>
				<div class="form-group">
					<br><button type="submit" class="btn btn-success btn-block"> Register</button>
				</div>
			</form>
			<header class="section-heading">
				<h3 class="m-5 text-white">User Reviews </h3>
			</header>
			<div class="card bg-dark text-white ml-5 mb-5">
				{% for review in userreview %}
			   <div class="card-body">
				   <b><span>{{review.user}}</span></b>
				   <b><span class="float-lg-right text-secondary">{{review.updated_date}}</span></b><br><br>
				   <b><p><span>{{review.title}}</span></p></b>
				   <p><span>{{review.review}}</span></p>
			  </div>
				{% endfor %}
			</div>
		</div>
	</div>
</section>
{% endblock %}

{% block account %}
	  {% if user.is_authenticated %}
			 <p><span class="me-3 text-danger">{{user.first_name}}</span> Now you are in <span class="text-success">Online</span></p>
      {% else %}
		<span class="me-3">Register for free</span>&nbsp&nbsp&nbsp&nbsp
    	<a href="{% url 'register' %}"><button type="button" class="btn btn-outline-light btn-rounded">Register</button></a>
	  {% endif %}
{% endblock %}